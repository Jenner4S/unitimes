<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE message PUBLIC "-//UniTime//Student Sectioning Interface/EN" "../StudentScheduling_3_4.dtd">
<!-- 
<!DOCTYPE message PUBLIC "-//UniTime//Student Sectioning Interface/EN" "http://www.unitime.org/interface/StudentScheduling_3_4.dtd">
 -->
 
<!-- 
 * Licensed to The Apereo Foundation under one or more contributor license
 * agreements. See the NOTICE file distributed with this work for
 * additional information regarding copyright ownership.
 *
 * The Apereo Foundation licenses this file to you under the Apache License,
 * Version 2.0 (the "License"); you may not use this file except in
 * compliance with the License. You may obtain a copy of the License at:
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 *
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * 
 -->
 
 <!--
 - Student Scheduling XML interface
   - this interface is to be used to synchronize student information with an external system during (online) student scheduling
   - it also contains ability for the external system to approve / reject changes in student's schedule (an ability of a student to get into a course)
 - Since UniTime 3.4
-->

<message id="10234" repliesTo="10232" created="2012/04/17 6:46:10" type="schedule_change" source="assistant" tsformat="yyyy/MM/dd HH:mm:ss" campus="PWL" year="2013" term="Spring">
    <!-- id .. generated unique message id -->
    <!-- repliesTo .. if the message is a response to some other message, this contains id of the other message -->
    <!-- created .. time stamp in some given format -->
    <!-- type .. message type: schedule change, approval request, consent, synchronization, approval, student change -->
    <!-- source .. message source (for UniTime side): assistant, wait-list, course change, dashboard, nightly synchronization, student change (optional) -->
    <!-- tsformat .. time stamp format -->
    <student id="120345679" first="Joe" middle="Franklin" last="Doe" email="doe@university.edu" status="scheduling" statusTimestamp="2012/04/01 12:23:23">
        <!-- id .. student external id -->
        <!-- first, middle, last .. student name -->
        <!-- email .. student email -->
        <!-- status .. student status reference -->
        <!-- statusTimestamp .. time of the last student status change, not sure if this field will be useful, but leaving it in for audit trail -->
        <curriculum area="A" major="VSC" classification="01"/>
        <!-- curriculum information, multiple curricula can be provided -->
        <group code="YngExpl"/>
        <!-- multiple student groups may be present -->
        
        <!-- student schedule: -->
        <course subject="AAE" number="20300" status="approved" statusTimestamp="2012/04/14 17:12:10" requestUserId="120345679" requestTimestamp="2012/04/14 17:11:10" >
            <class id="12456"/>
            <class id="12424"/>
            <!-- subject, number .. course identification -->
            <!-- status .. approval status: 
                       approved - sent by SIS to UniTime to indicate it successfully enrolled the student in all parts of the course
                                - sent by UniTime to SIS to indicate it has sent this specific course request in the past and the request
                                    was successful in SIS.  
                       pending - sent by SIS to UniTime to indicate the student request for this course has not been approved yet because
                                    it is waiting on some type of consent or other approval.  UniTime will hold the student's space in the
                                    course and resend the request later to see if the consent or other approval has been granted.
                               - sent by UniTime to SIS to indicate UniTime previously received a status of pending from the SIS for this
                                    course request.  The SIS should check to see if the appropriate consent or other approval has been granted
                                    respond appropriately. 
                       rejected - only from SIS to UniTime.  If a course is rejected UniTime will not schedule the student the course. -->
            <!--   statuses to be defined in a lookup table, generated by SIS in a response to UniTime approval request / schedule change messages -->
            <!-- statusTimestamp .. time and date the status was received from the SIS, not sure if this is useful, but leaving it in for audit trail -->
            <!-- requestUserId .. the external id of the user who made the request for this course, normally it is the student, however, it could be
                                     an advisor or other person who has rights to schedule a student into a course, likely not used by Banner
                                     but may be useful to a different SIS -->
            <!-- requestTimestamp .. the timestamp the request for the course was made, not sure how useful this is but leaving it in for audit trail -->
            <!-- class id .. external id (CRN) of the class -->
        </course>
        <course subject="ENGL" number="10600R" status="pending" statusTimestamp="2012/04/14 17:12:10" message="Instructor signature needed" requestUserId="120345679" requestTimestamp="2012/04/14 17:11:10" >
            <!-- status, statusTimestamp, message .. last provided status and message (optional) from Banner approval process -->
            <!-- requestUserId, requestTimestamp .. last provided request user external id and request timestamp (optional) for Banner approval process -->
            <class id="23495"/>
            <class id="23454"/>
            <class id="23065"/>
        </course>
        <course subject="BIOL" number="10500" status="reject" message="prereq not met"/>
        <!-- example reject response from SIS -->
        <!-- if message is not provided, the default one from the status lookup table is given -->
        <!-- status lookup table: banner status -> approve / reject / pending + default message to student -->
        <course subject="AD" number="11000" status="reject" message="prereq not met" >
        	<class id="54491" message="prereq not met"/>
        	<class id="76746" message="Instructor signature needed"/>
        </course>	
        <!-- example reject response from SIS -->
        <!-- if the SIS has multiple reject messages that are for different classes in the course, the SIS may return 
                a class element that contains a message for each rejected class-->
        <course subject="CS" number="25400" requestUserId="120345679" requestTimestamp="2012/04/14 17:11:10" >
            <!-- new course (no approval status was provided by Banner yet) -->
            <class id="213435"/>
        </course>
        <course subject="MA" number="15200" requestUserId="120345679" requestTimestamp="2012/04/14 17:11:10" >
            <!-- new course (student placed in lecture over limit) -->
            <class id="75323"/>
            <class id="96853"/>
            <class id="53677"/>
        	<reservation type="Individual" allowOverLimit="true" allowTimeOverlap="false"/>
        	<!-- if reservation is present, Banner must accept all classes in the request -->
        </course>
        <course subject="AAE" number="20400" consent="instructor" consentUserId="23456435" consentTimestamp="2012/04/16 14:23:20" requestUserId="120345679" requestTimestamp="2012/04/14 17:11:10" >
            <class id="231235"/>
            <!-- consent .. instructor, department or other consent as defined in the UniTime consent types table -->
            <!-- consentId .. external id of the person who gave consent -->
            <!-- consentTimestamp .. timestamp representing the time and date the consent was given, not sure if this is useful, but leaving it in for audit trail -->
            <!-- reasoning for this data - the SIS may need to create an appropriate record in its database to give a student the consent or override so we need
                    to provide enough data to allow the SIS to do this. -->
        </course>
        <!-- Do we need to list courses, classes that were removed from student schedule (from UniTime), either by student, automatic scheduling, or by rejecting consent? no 
             - This is always the complete schedule if a course is not in the list the student needs to be removed from the course on the Banner Side 
        -->
        <!-- Do we want to include timestamp?
           when a course was requested
           when a class was given to the student in UniTime
           when approval status was given / changed   - not necessary, Banner does not care, it is useful for UniTime to store, but Banner will do nothing with it.       
        -->
        <!-- Do we want to include external id of the person who did make the change (if it was not automated)? yes
           Or just one of: student, advisor (any person, not student), system (automatic) - no
           This we know on a course request and on the enrollment
         -->
        <!-- Do we want to include priority / alternativity of the course request? no -->
        <!-- Do we want to include wait-listed (not assigned) course requests in the student schedule? no -->
        <course subject="AAE" number="30100" requestUserId="120345679" requestTimestamp="2012/04/16 12:23:12 " consent="department" consentUserId="23456435"  consentTimestamp="2012/04/17 8:12:21" status="approved" statusTimestamp="2012/04/17 8:14:23">
            <class id="340920"/>
        </course>
    </student>
            
    <!-- student schedule change example -->
    <!-- request sent from UniTime -->
    <!-- message id="1243214" created="2012/04/17 09:19:10" type="schedule change" source="assistant" -->
    <student id="120345679" first="Joe" middle="Franklin" last="Doe" email="doe@university.edu" status="2012/04/01 12:23:23 scheduling">
        <curriculum area="A" major="VCS" classification="01"/>
        <!-- course with no change -->
        <course subject="AAE" number="20300" requestUserId="120345679" requestTimestamp="2012/04/14 17:11:10" status="approved" statusTimestamp="2012/04/14 17:12:10">
            <class id="12456"/>
            <class id="12424"/>
        </course>
        <course subject="AAE" number="20400" requestUserId="120345679" requestTimestamp="2012/04/14 17:11:10" status="approved" statusTimestamp="2012/04/14 17:12:10" consent="instructor" consentUserId="23456435" consentTimestamp="2012/04/16 14:23:20">
            <class id="231235"/>
        </course>
        <!-- new course -->
        <course subject="AAE" number="30100" requestUserId="120345679" requestTimestamp="2012/04/17 09:19:10">
        	<!-- if reservation is present, Banner must accept all classes in the request -->
            <class id="340920"/>
        	<reservation type="Individual" allowOverLimit="true" allowTimeOverlap="true"/>
        </course>
        <!-- class schedule change, in a pending state -->
        <course subject="ENGL" number="10600R" requestUserId="120345679" requestTimestamp="2012/04/14 17:11:10" status="pending" statusTimestamp="2012/04/14 17:12:10 " message="Instructor signature needed">
            <class id="234095"/>
            <class id="234054"/>
            <class id="230065"/>
        </course>
    </student>
    <!-- response sent from Banner -->
    <!-- message id="1243134" repliesTo="1243214" created="2012/04/17 09:21:15" type="approval" -->
    <student id="120345679" first="Joe" middle="Franklin" last="Doe" email="doe@university.edu" status="scheduling">
        <curriculum area="A" major="VCS" classification="01"/>
        <course subject="AAE" number="20300" status="approved"/>
        <!-- class assignments are not needed -->
        <course subject="AAE" number="20400" status="approved"/>
        <course subject="AAE" number="30100" status="approved"/>
        <course subject="ENGL" number="10600R" status="pending" message="Instructor signature needed">
            <class id="234095"/>
            <class id="234054" message="Instructor signature needed"/>
            <class id="230065"/>
        </course>
    </student>
    
    <!-- student update message from Banner -->
    <!-- message id="1243324" created="2012/04/17 09:25:21" type="student change" -->
    <student id="120345679" first="Joe" middle="Franklin" last="Doe" email="doe@university.edu" status="scheduling">
        <curriculum area="A" major="VCS" classification="01"/>
    </student>
    <!-- if there is some pending / not yet approved course, UniTime will response with a request message -->
    <!-- message id="12432455" repliesTo="1243324" created="2012/04/17 09:27:12" type="approval_request" source="student_change" -->
    <!-- same content as the schedule change example above -->
</message>